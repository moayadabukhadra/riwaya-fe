(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{2535:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile-page",function(){return n(3177)}])},7521:function(e,t,n){"use strict";var r=n(8682);t.Z={login:function(e){return r.Z.post("login",e)},register:function(e){return r.Z.post("/register",e)},getRole:function(){return r.Z.post("user-role")},logout:function(){return r.Z.post("/logout")},facebookLogin:function(e){return r.Z.post("auth/facebook",e)},editProfile:function(e){return r.Z.post("edit-profile",e)},editProfileImage:function(e){return r.Z.post("edit-profile-image",e)},forgetPassword:function(e){return r.Z.post("auth/forgot-password",e)},resetPassword:function(e){return r.Z.post("auth/reset-password",e)},googleLogin:function(e){return r.Z.post("auth/google",e)},getUserBooks:function(e){return console.log("page",e),r.Z.get("my-library?page=".concat(e))},checkLibraryForBook:function(e){return r.Z.get("check-library-for-book/".concat(e))},updateLibrary:function(e){return r.Z.post("update-library/".concat(e))}}},8682:function(e,t,n){"use strict";var r=n(6154),a=n(5991),s=n(3454),i=r.Z.create({baseURL:s.env.API_URL||"https://riwaya.rf.gd/api"});i.interceptors.request.use(function(e){var t=a.Z.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){Promise.reject(e)}),t.Z=i},3177:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(8732),a=n(5893),s=n(5991),i=n(7294),o=n(7521),l=function(e){var t=e.itemImage,n=(0,r._)((0,i.useState)(null),2),l=n[0],c=n[1];return(0,i.useEffect)(function(){t?c("https://riwaya.rf.gd/riwaya/storage/app/public/images/"+t):c("/images/placeholders/user-placeholder.png")},[t]),(0,a.jsxs)("form",{encType:"multipart/form-data",className:"position-relative d-flex mb-2",style:{height:"150px",width:"150px"},children:[(0,a.jsxs)("label",{className:"position-absolute btn btn-dark rounded-icon cursor-pointer text-white",style:{top:"0",left:"0"},children:[(0,a.jsx)("i",{className:"fa fa-edit"}),(0,a.jsx)("input",{type:"file",className:"d-none",name:"image",onChange:function(e){c(URL.createObjectURL(e.target.files[0]));var t=new FormData;t.append("image",e.target.files[0]),o.Z.editProfileImage(t).then(function(e){var t=e.data;s.Z.dispatch({type:"UPDATE",payload:t.success})})}})]}),(0,a.jsx)("div",{id:"image-preview",style:{height:"150px",width:"150px",backgroundImage:"url(".concat(l,")"),backgroundSize:"cover",backgroundPosition:"center",borderRadius:"50%"}}),(0,a.jsxs)("label",{className:"position-absolute btn btn-danger rounded-icon cursor-pointer",style:{bottom:"0",left:"0"},onClick:function(){return c("/images/placeholders/user-placeholder.png")},children:[(0,a.jsx)("i",{className:"fa fa-trash"}),(0,a.jsx)("input",{hidden:!0,type:"checkbox",name:"remove_image"})]})]})},c=n(98),u=n(8489),d=function(){var e,t=s.Z.getState().user,n=(0,r._)((0,i.useState)(!1),2),d=n[0],m=n[1];return(0,a.jsx)(u.X2,{className:"justify-content-center",style:{margin:"100px 0"},children:(0,a.jsxs)("div",{className:"row justify-content-around col-8 bg-white shadow rounded-3 p-5",children:[(0,a.jsx)(c.Z,{loading:d}),(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:(0,a.jsx)(l,{itemImage:null==t?void 0:null===(e=t.image)||void 0===e?void 0:e.path})}),(0,a.jsxs)("div",{className:"d-flex align-items-center flex-column",children:[(0,a.jsx)("strong",{className:"text-center",children:null==t?void 0:t.name}),(0,a.jsx)("span",{className:"mx-2 fs-7",children:null==t?void 0:t.email})]}),(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(!0);var t=new FormData(e.target);o.Z.editProfile(t).then(function(e){var t=e.data;s.Z.dispatch({type:"UPDATE",payload:t.success}),m(!1)})},className:"d-flex flex-column",encType:"multipart/form-data",children:[(0,a.jsxs)("div",{className:"form-group mb-4",children:[(0,a.jsx)("label",{htmlFor:"name",className:"form-label",children:"الاسم"}),(0,a.jsx)("input",{type:"text",name:"name",className:"form-control",id:"name"})]}),(0,a.jsxs)("div",{className:"form-group mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"البريد الالكتروني"}),(0,a.jsx)("input",{type:"email",name:"email",className:"form-control",id:"email"})]}),(0,a.jsx)("div",{className:"form-group mb-4",children:(0,a.jsx)("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",placeholder:"نبذة عنك"})}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end",children:"حفظ"})]})]})})}},98:function(e,t,n){"use strict";var r=n(8146),a=n(5893);n(7294),t.Z=function(e){return e.loading?(0,a.jsx)("div",{style:{position:"fixed",inset:"0",zIndex:"9999",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("div",{className:"book",children:(0,a.jsxs)("div",{className:"inner",children:[(0,a.jsx)("div",{className:"left"}),(0,a.jsx)("div",{className:"middle"}),(0,a.jsx)("div",{className:"right"}),(0,a.jsx)("ul",{children:(0,r._)(Array(18)).map(function(e,t){return(0,a.jsx)("li",{})})})]})})}):null}}},function(e){e.O(0,[18,774,888,179],function(){return e(e.s=2535)}),_N_E=e.O()}]);