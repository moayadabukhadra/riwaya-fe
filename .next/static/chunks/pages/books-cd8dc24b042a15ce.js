(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3902:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return n(6816)}])},7631:function(e,t,n){"use strict";var a=n(8682),s="/book";t.Z={getAllBooks:function(e){return a.Z.get(s+"s",{params:e})},getBook:function(e){return a.Z.get("".concat(s,"/show/").concat(e))},getLatestBooks:function(){return a.Z.get("".concat(s,"/latest"))},getMostReadBooks:function(){return a.Z.get("".concat(s,"/most-read"))},downloadBook:function(e){return a.Z.get("".concat(s,"/download/").concat(e))},searchBooks:function(e){return a.Z.get("/search",{params:{search:e}})}}},7521:function(e,t,n){"use strict";var a=n(8682);t.Z={login:function(e){return a.Z.post("login",e)},register:function(e){return a.Z.post("/register",e)},getRole:function(){return a.Z.post("user-role")},logout:function(){return a.Z.post("/logout")},facebookLogin:function(e){return a.Z.post("auth/facebook",e)},editProfile:function(e){return a.Z.post("edit-profile",e)},editProfileImage:function(e){return a.Z.post("edit-profile-image",e)},forgetPassword:function(e){return a.Z.post("auth/forgot-password",e)},resetPassword:function(e){return a.Z.post("auth/reset-password",e)},googleLogin:function(e){return a.Z.post("auth/google",e)},getUserBooks:function(e){return console.log("page",e),a.Z.get("my-library?page=".concat(e))},checkLibraryForBook:function(e){return a.Z.get("check-library-for-book/".concat(e))},updateLibrary:function(e){return a.Z.post("update-library/".concat(e))}}},8682:function(e,t,n){"use strict";var a=n(6154),s=n(5991),i=n(3454),o=a.Z.create({baseURL:i.env.API_URL||"https://riwaya.rf.gd/api"});o.interceptors.request.use(function(e){var t=s.Z.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){Promise.reject(e)}),t.Z=o},6816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n(4610),s=n(7462),i=n(8732),o=n(5893),r=n(7631),l=n(7294),c=n(8489),d=n(8682),u="/category",m={getAllCategories:function(e){return d.Z.get("categories",{params:e})},getCategory:function(e){return d.Z.get("".concat(u,"/").concat(e))},createCategory:function(e){return d.Z.post(u,e)},updateCategory:function(e,t){return d.Z.post("".concat(u,"/").concat(e),t)},deleteCategory:function(e){return d.Z.delete("".concat(u,"/").concat(e))}};n(9008);var f=n(1059),p=n(8146),g=n(5935),x=n(6455),h=n.n(x),b={addComment:function(e,t){return d.Z.post("".concat("/comment","/add/").concat(e),t)}},j=n(5991),v=n(9755),y=n.n(v),w=n(7521),N=function(e){var t,n,a,s=e.book,r=(0,i._)((0,l.useState)([]),2),c=r[0],d=r[1],u=(0,i._)((0,l.useState)(!1),2),m=u[0],f=u[1];(0,l.useEffect)(function(){w.Z.checkLibraryForBook(s.id).then(function(e){f(e.data.success)})},[]);var x=function(e){e.preventDefault();var t,n,a={body:e.target.comment.value,parent_id:null!==(n=null===(t=e.target.parent_id)||void 0===t?void 0:t.value)&&void 0!==n?n:null};b.addComment(s.id,a).then(function(e){e.data,a.user=j.Z.getState().user,d((0,p._)(c).concat([a])),h().fire({icon:"success",title:"تمت الاضافة",showConfirmButton:!1,timer:1500})}).catch(function(e){401===e.response.status&&h().fire({icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})})};return(0,o.jsxs)("div",{className:"row align-items-start",children:[(0,o.jsx)("img",{className:"col-md-4 mb-3",src:(null==s?void 0:s.image)?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+(null==s?void 0:null===(t=s.image)||void 0===t?void 0:t.path):"/images/placeholders/placeholder.jpg",alt:s.title}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 ms-3 col-12 col-md-7",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsxs)("div",{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"fw-bold text-dark text-decoration-none m-0 fs-3",children:null==s?void 0:s.title}),(0,o.jsxs)("span",{className:"fw-bold fs-6 text-muted text-decoration-none m-0",children:["المؤلف: ",null==s?void 0:null===(n=s.author)||void 0===n?void 0:n.name]}),(0,o.jsxs)("span",{className:"fw-bold fs-6 text-muted text-decoration-none m-0",children:["التصنيف: ",null==s?void 0:null===(a=s.category)||void 0===a?void 0:a.name]}),(0,o.jsxs)("span",{className:"fw-bold fs-6 text-muted text-decoration-none m-0",children:["عدد الصفحات: ",null==s?void 0:s.page_count]})]}),(0,o.jsxs)("button",{onClick:function(){w.Z.updateLibrary(s.id).then(function(e){var t=e.data;f(t.in_library),h().fire({icon:"success",title:t.message,showConfirmButton:!1,timer:1500})}).catch(function(e){401===e.response.status&&h().fire({icon:"error",title:"يجب تسجيل الدخول اولا",showConfirmButton:!1,footer:'<a href="/auth/login">تسجيل الدخول</a>',showCancelButton:!0,cancelButtonText:"الغاء"})})},className:"btn ".concat(m?"btn-secondary":"btn-outline-secondary","\n                         d-flex align-items-center justify-content-center gap-1 col-5 col-lg-3 mb-3"),children:[(0,o.jsx)("i",{className:"fas fa-plus"}),m?"حذف من مكتبتي":"إضافة الى مكتبتي"]})]}),(0,g.ZP)(null==s?void 0:s.description),(0,o.jsxs)("div",{className:"mt-2 row align-items-center justify-content-center justify-content-lg-start gap-1",children:[(0,o.jsxs)("a",{download:s.file,href:"https://riwaya.rf.gd/api/book/download/"+s.id,className:"btn btn-primary d-flex align-items-center justify-content-center gap-1 text-white col-5 col-lg-3 mb-3",children:[(0,o.jsx)("i",{className:"fas fa-file-pdf"}),"تحميل الكتاب"]}),(0,o.jsxs)("a",{href:"https://riwaya.rf.gd/riwaya/storage/app/public/books/"+s.file,className:"btn btn-info  d-flex align-items-center justify-content-center gap-1 text-white col-5 col-lg-3 mb-3",children:[(0,o.jsx)("i",{className:"fas fa-book-open"}),"قراءة"]})]})]}),(0,o.jsx)("div",{className:"comment-section col-12",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[(0,o.jsx)("span",{className:"fw-bold text-dark text-decoration-none m-0 fs-3",children:"التعليقات"}),(0,o.jsxs)("button",{className:"btn btn-outline-dark d-flex align-items-center justify-content-center gap-1",children:[(0,o.jsx)("i",{className:"fa fa-comment"}),s.comments.length,(0,o.jsx)("span",{className:"ms-2 d-none d-md-block",children:" تعليق"})]})]}),(0,o.jsx)("div",{className:"d-flex flex-column border-bottom border-light pb-2 gap-1",children:c&&c.map(function(e){if(!e.parent_id){var t,n,a,s;return(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2  p-2",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsxs)("div",{className:"d-flex align-items-start",children:[(0,o.jsx)("img",{src:(null===(t=e.user)||void 0===t?void 0:t.image)?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+(null===(n=e.user)||void 0===n?void 0:n.image.path):"/images/placeholders/user-placeholder.png",alt:null===(a=e.user)||void 0===a?void 0:a.name,className:"rounded-circle",width:50,height:50}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"fw-bold text-dark text-decoration-none m-0 fs-5",children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,o.jsx)("p",{className:"text-muted",children:e.body})]})]}),(0,o.jsx)("span",{className:"text-muted text-decoration-none m-0 flex-shrink-0",children:e.created_at})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex align-items-center gap-3 me-3",children:[(0,o.jsx)("a",{className:"cursor-pointer text-decoration-none text-primary fs-7 fw-bold",onClick:function(e){var t=y()(e.target).parent().parent().find("form");t.toggleClass("d-none"),t.find("textarea").focus()},children:"الرد على التعليق "}),e.replies&&e.replies.length>0&&(0,o.jsx)("a",{onClick:function(e){y()(e.target).parent().parent().find(".replies").toggleClass("d-none")},className:"cursor-pointer text-decoration-none text-primary fs-7 fw-bold",children:"الردود"})]}),(0,o.jsx)("div",{className:"replies m-3 d-none",children:e.replies&&e.replies.map(function(e){var t,n,a,s;return(0,o.jsx)("div",{className:"d-flex flex-column border-bottom border-light",children:(0,o.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,o.jsxs)("div",{className:"d-flex align-items-start",children:[(0,o.jsx)("img",{src:(null===(t=e.user)||void 0===t?void 0:t.image)?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+(null===(n=e.user)||void 0===n?void 0:n.image.path):"/images/placeholders/user-placeholder.png",alt:null===(a=e.user)||void 0===a?void 0:a.name,className:"rounded-circle",width:50,height:50}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"fw-bold text-dark text-decoration-none p-0 fs-5",children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,o.jsx)("p",{className:"text-muted",children:e.body})]})]})})})})}),(0,o.jsxs)("form",{onSubmit:x,className:"comment-form w-100 my-2 d-none",children:[(0,o.jsx)("input",{type:"hidden",name:"parent_id",value:e.id}),(0,o.jsx)("textarea",{rows:1,name:"comment",className:"form-control",placeholder:"اكتب تعليقك هنا"}),(0,o.jsx)("button",{type:"submit","data-auth":"true",className:"btn btn-light mt-2 float-start text-dark d-flex align-items-center gap-1",children:(0,o.jsx)("i",{className:"fa fa-paper-plane"})})]})]})]})}})}),(0,o.jsxs)("form",{onSubmit:x,"data-auth":"true",className:"comment-form col-12 my-2",children:[(0,o.jsx)("textarea",{name:"comment",className:"form-control",placeholder:"اكتب تعليقك هنا"}),(0,o.jsxs)("button",{type:"submit",className:"btn btn-primary mt-2 float-start text-white d-flex align-items-center gap-1",children:[(0,o.jsx)("i",{className:"fa fa-paper-plane"}),"إرسال"]})]})]})})]})},k=n(98),Z=n(9382),_=n(4593),C=function(){var e,t=(0,i._)((0,l.useState)(),2),n=t[0],d=t[1],u=(0,i._)((0,l.useState)(!0),2),p=u[0],g=u[1],x=(0,i._)((0,l.useState)(),2),h=x[0],b=x[1],j=(0,i._)((0,l.useState)(),2),v=j[0],y=j[1],w=(0,i._)((0,l.useState)(),2),C=w[0],B=w[1],P=(0,i._)((0,l.useState)(),2),S=P[0],L=P[1],A=(0,i._)((0,l.useState)(),2),E=A[0],V=A[1],I=(0,i._)((0,l.useState)({with:"author,category,image",paginate:"18"}),2),q=I[0],O=I[1];return(0,l.useEffect)(function(){g(!0);var e=window.location.search.split("=")[1];e&&(q.selected_book=e,r.Z.getBook(e).then(function(e){L(e.data)})),m.getAllCategories().then(function(e){y(e.data.map(function(e){return{value:e.id,label:e.name}}))}),r.Z.getAllBooks(q).then(function(e){var t=e.data;d(t.books),V(t.related_books),b(t.books.links),g(!1)})},[q]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_.q,{children:[(0,o.jsx)("title",{children:S?"كتاب "+S.title:C?"تحميل وقرائة كتب "+C:"تصفح وحمّل مجموعة واسعة من الكتب باللغة العربية وغيرها | اعثر على قراءتك التالية"}),(0,o.jsx)("meta",{property:"og:title",content:S?"كتاب "+S.title:C?"تحميل وقرائة كتب "+C:"تصفح وحمّل مجموعة واسعة من الكتب باللغة العربية وغيرها | اعثر على قراءتك التالية"}),(0,o.jsx)("meta",{property:"og:description",content:S?S.description:"تصفح وحمّل مجموعة واسعة من الكتب باللغة العربية وغيرها | اعثر على قراءتك التالية"}),(0,o.jsx)("meta",{property:"og:image",content:(null==S?void 0:S.image)?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+(null==S?void 0:S.image.path):"/images/library.jpg"}),(0,o.jsx)("meta",{property:"og:url",content:"https://riwaya-jo.site/books/?book=".concat(null==S?void 0:S.id)}),(0,o.jsx)("meta",{property:"og:type",content:"website"}),(0,o.jsx)("meta",{name:"description",content:S?"كتاب "+S.title+" للكاتب "+S.author.name+" تصنيف "+S.category.name+" تحميل وقرائة الكتاب pdf ":" المعاصرة، استكشف مجموعة واسعة من الأنواع الأدبية واعثر على قراءتك التالية المثيرة. تصفح وابحث وانغمس في العالم الأدبي الغني للكتب باللغة العربي"})]}),(0,o.jsx)(k.Z,{loading:p}),(0,o.jsxs)(c.W2,{fluid:!0,className:"content row mx-0 justify-content-md-around justify-content-center",children:[(0,o.jsx)("div",{className:"col-md-3 row mb-5",children:(0,o.jsxs)("div",{className:" bg-light shadow rounded-2 p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,o.jsx)("label",{className:"position-relative d-flex align-items-center position-relative",children:(0,o.jsx)("input",{type:"text",className:"main-search-input",placeholder:"ابحث عن كتاب ,مؤلف , تصنيف..."})}),(0,o.jsxs)("button",{onClick:function(){O((0,s._)((0,a._)({},q),{page:1,query:document.querySelector(".main-search-input").value}))},className:"btn btn-primary w-100 mt-3 my-3 text-white d-flex align-items-center justify-content-center gap-2 mt-auto",children:[(0,o.jsx)("i",{className:"fa fa-search"}),"بحث"]})]}),(0,o.jsx)("div",{className:"book-section-title mb-4 ",children:"التصنيفات"}),(0,o.jsxs)("ul",{className:"list-unstyled categories-list custom-scroll",children:[(0,o.jsx)("li",{className:"d-flex align-items-center gap-2 p-2 cursor-pointer  border-bottom d-flex align-items-center justify-content-between",onClick:function(){O((0,s._)((0,a._)({},q),{category:null}))},children:"جميع التصنيفات"}),v&&v.map(function(e){return(0,o.jsx)("li",{onClick:function(){O((0,s._)((0,a._)({},q),{category:e.value})),B(e.label)},className:"d-flex align-items-center gap-2 p-2 cursor-pointer  border-bottom d-flex align-items-center justify-content-between [object Object]",children:(0,o.jsx)("span",{children:e.label})},e.value)})]})]})}),(0,o.jsxs)("div",{className:"col-md-9",children:[S&&(0,o.jsx)(N,{book:S}),E&&(0,o.jsxs)("div",{className:"book-section-title mb-4",children:["كتب أخرى ل",null==S?void 0:S.author.name]}),E&&(0,o.jsx)(c.X2,{className:"mb-5 justify-content-between",children:(0,o.jsx)(f.Z,{books:E,swiperKey:"related"},"related")}),(0,o.jsx)(c.X2,{className:"mb-5 justify-content-ؤثىفثق",children:(null==n?void 0:n.data)&&(null==n?void 0:n.data.map(function(e){return(0,o.jsx)("div",{className:"col-6 col-md-4 col-lg-3 col-xl-2 mb-4",children:(0,o.jsx)(Z.Z,{book:e},e.id)})},[]))}),(0,o.jsx)("nav",{className:"","aria-label":"...",children:(0,o.jsx)(c.tl,{className:"pagination justify-content-center my-2",listClassName:"justify-content-center gap-1  flex-wrap",children:h&&h.map(function(t){return(0,o.jsx)(c.nt,{className:(t.url?"":"disabled")+(t.active?"active":""),children:(0,o.jsx)(c.kN,{className:"rounded-2 d-flex align-items-center justify-content-center gap-1 flex-grow-1",onClick:function(){t.url&&(q.page=t.url.substring(t.url.lastIndexOf("=")+1),r.Z.getAllBooks(q).then(function(e){var t=e.data;d(t.books),V(t.related_books),b(t.books.links)}))},children:t.label.includes("next")?(0,o.jsx)("i",{className:"fa fa-angle-left"}):t.label.includes("prev")?(0,o.jsx)("i",{className:"fa fa-angle-right"}):null!==(e=t.label)&&void 0!==e?e:t.label})},t.label)})})})]})]})]})}},9382:function(e,t,n){"use strict";var a=n(5893);n(7294);var s=n(8489),i=n(9755),o=n.n(i);t.Z=function(e){o()(document).ready(function(){o()(".book-card").on("mouseover",function(){o()(this).removeClass("text-truncate")})});var t,n,i=e.book;return(0,a.jsx)("a",{onMouseEnter:function(){},href:"/books/?book="+i.id,className:"mb-5",children:(0,a.jsx)("div",{className:"card text-white card-has-bg click-col",style:{backgroundImage:"url(".concat(i.image?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+i.image.path:"/images/placeholders/placeholder.jpg",")")},children:(0,a.jsxs)("div",{className:"card-img-overlay d-flex flex-column",children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h4",{className:"card-title book-title mt-0 fs-6 text-truncate",style:{whiteSpace:"nowrap"},children:(0,a.jsx)("a",{className:"text-white text-decoration-none ",children:i.title})}),(0,a.jsx)(s.Ct,{color:"primary fw-normal",className:"mb-3",children:null===(t=i.category)||void 0===t?void 0:t.name})]}),(0,a.jsx)("div",{className:"card-footer p-0",children:(0,a.jsxs)("a",{href:"/authors?author="+i.author.id,className:"d-flex gap-1 align-items-center text-decoration-none",children:[(0,a.jsx)("img",{className:"mr-3 rounded-circle",src:i.author.image?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+i.author.image.path:"/images/placeholders/placeholder.jpg",alt:"author-img",style:{maxWidth:"50px"}}),(0,a.jsx)("div",{className:"media-body",children:(0,a.jsx)("h6",{className:"my-0 text-white d-block",children:null===(n=i.author)||void 0===n?void 0:n.name})})]})})]})})})}},1059:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5893),s=n(2379),i={320:{slidesPerView:2,spaceBetween:10},480:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:10},800:{slidesPerView:4,spaceBetween:10},1250:{slidesPerView:6,spaceBetween:10},1500:{slidesPerView:7,spaceBetween:10}},o=n(9382),r=function(e){return(0,a.jsx)(s.tq,{slidesPerView:4,spaceBetween:10,breakpoints:i,children:e.books&&e.books.map(function(t,n){return(0,a.jsx)(s.o5,{className:"",children:(0,a.jsx)(o.Z,{book:t},e.swiperKey+t.id)},n+e.swiperKey+t.id)})})}},98:function(e,t,n){"use strict";var a=n(8146),s=n(5893);n(7294),t.Z=function(e){return e.loading?(0,s.jsx)("div",{style:{position:"fixed",inset:"0",zIndex:"9999",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)("div",{className:"book",children:(0,s.jsxs)("div",{className:"inner",children:[(0,s.jsx)("div",{className:"left"}),(0,s.jsx)("div",{className:"middle"}),(0,s.jsx)("div",{className:"right"}),(0,s.jsx)("ul",{children:(0,a._)(Array(18)).map(function(e,t){return(0,s.jsx)("li",{})})})]})})}):null}}},function(e){e.O(0,[18,746,379,935,593,774,888,179],function(){return e(e.s=3902)}),_N_E=e.O()}]);