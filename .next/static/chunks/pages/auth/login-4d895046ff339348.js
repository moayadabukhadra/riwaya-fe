(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{1206:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.FacebookLoginClient=t.SDK_SCRIPT_ELE_ID=void 0;let r=n(4356);t.SDK_SCRIPT_ELE_ID="facebook-jssdk",t.FacebookLoginClient={getFB:()=>window.FB?window.FB:(console.warn("FB not found"),null),getLoginStatus(e,t=!1){let n=this.getFB();if(!n){e({status:"unknown"});return}n.getLoginStatus(e,t)},getProfile(e,t){var n;null===(n=this.getFB())||void 0===n||n.api("me",t,e)},init(e){var t;null===(t=this.getFB())||void 0===t||t.init(e)},clear(){window.FB=null;let e=document.getElementById(t.SDK_SCRIPT_ELE_ID);e&&e.remove()},isRedirected(e){var t;let n=(0,r.paramsToObject)(window.location.search);return n.state===(null==e?void 0:e.state)&&void 0!==n[null!==(t=null==e?void 0:e.response_type)&&void 0!==t?t:""]},loadSdk(e,n){return o(this,void 0,void 0,function*(){yield(0,r.createScriptEle)(t.SDK_SCRIPT_ELE_ID,`https://connect.facebook.net/${e}/sdk${n?"/xfbml.customerchat":""}.js`)})},redirectToDialog(e,t){var{ignoreSdkError:n}=t,o=i(t,["ignoreSdkError"]);window.location.href=`https://www.facebook.com/dialog/oauth${(0,r.objectToParams)(Object.assign(Object.assign({},e),o))}`},login(e,t){var n,{ignoreSdkError:o}=t,r=i(t,["ignoreSdkError"]);try{null===(n=this.getFB())||void 0===n||n.login(e,r)}catch(e){if(o)return;throw e}},logout(e){this.getLoginStatus(t=>{var n;"connected"===t.status?null===(n=this.getFB())||void 0===n||n.logout(e):e()})}}},7526:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let s=r(n(7294)),c=n(1206),l=n(4356);t.default=function(e){var t,n;let{appId:o,language:i="en_US",scope:r="public_profile, email",fields:u="name,email,picture",onSuccess:d,onFail:f,onProfileSuccess:p,className:g,style:b,children:h="Login with Facebook",render:m,autoLoad:v=!1,useRedirect:j=!1,useCustomerChat:_=!1}=e,y=Object.assign(Object.assign({version:"v9.0",xfbml:!1,cookie:!1,localStorage:!0},e.initParams),{appId:o}),O=Object.assign(Object.assign({redirect_uri:"undefined"!=typeof window?location.origin+location.pathname:"/",state:"facebookdirect",response_type:"code"},e.dialogParams),{client_id:o}),w=Object.assign(Object.assign({return_scopes:!1,ignoreSdkError:!1},e.loginOptions),{auth_nonce:"function"==typeof(null===(t=e.loginOptions)||void 0===t?void 0:t.auth_nonce)?e.loginOptions.auth_nonce():null===(n=e.loginOptions)||void 0===n?void 0:n.auth_nonce,scope:r});(0,s.useEffect)(()=>{x()},[]);let x=()=>a(this,void 0,void 0,function*(){yield c.FacebookLoginClient.loadSdk(i,_),window.fbAsyncInit=()=>{c.FacebookLoginClient.init(y);let e=c.FacebookLoginClient.isRedirected(O);if(!1===e&&v){P();return}!0===e&&j&&k()}}),k=()=>{c.FacebookLoginClient.login(e=>{if(!e.authResponse){f&&f({status:"loginCancelled"});return}d&&d(e.authResponse),p&&c.FacebookLoginClient.getProfile(p,{fields:u})},Object.assign(Object.assign({},w),{scope:r}))},P=()=>{if((0,l.isFacebookApp)()||j){c.FacebookLoginClient.redirectToDialog(O,w);return}if(!window.FB){f&&f({status:"facebookNotLoaded"});return}k()};return m?m({onClick:P,logout:c.FacebookLoginClient.logout}):s.default.createElement("button",{type:"button",onClick:P,className:g,style:b},h)}},4933:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScriptEle=void 0,t.createScriptEle=(e,t)=>new Promise(n=>{var o;let i=document.getElementsByTagName("script")[0];if(document.getElementById(e)){n(void 0);return}let r=document.createElement("script");if(r.id=e,r.src=t,r.onload=n,i)null===(o=i.parentNode)||void 0===o||o.insertBefore(r,i);else{let e=document.body.childNodes;document.body.insertBefore(r,e.item(e.length-1))}})},4356:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4933),t),i(n(1995),t),i(n(8382),t)},1995:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsToObject=t.objectToParams=t.isObject=void 0,t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),t.objectToParams=e=>(0,t.isObject)(e)&&0!==Object.keys(e).length?"?"+Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"):"",t.paramsToObject=e=>(null==e?void 0:e.replace(/^\?/,"").split("&").reduce((e,t)=>{if(!t)return e;let[n,o]=t.split("=");return Object.assign(Object.assign({},e),{[n]:decodeURIComponent(o)})},{}))||{}},8382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFacebookApp=void 0,t.isFacebookApp=()=>{if("undefined"==typeof window)return!1;let e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1||e.indexOf("Instagram")>-1}},3502:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let a=r(n(7526));i(n(4356),t),i(n(3686),t),i(n(7526),t),i(n(1206),t),t.default=a.default},2653:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3686:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2653),t),i(n(4750),t),i(n(2230),t)},4750:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2230:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStatus=void 0,(n=t.LoginStatus||(t.LoginStatus={})).Connected="connected",n.NotAuthorized="not_authorized",n.Unknown="unknown"},2505:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return n(4800)}])},7521:function(e,t,n){"use strict";var o=n(8682);t.Z={login:function(e){return o.Z.post("login",e)},register:function(e){return o.Z.post("/register",e)},getRole:function(){return o.Z.post("user-role")},logout:function(){return o.Z.post("/logout")},facebookLogin:function(e){return o.Z.post("auth/facebook",e)},editProfile:function(e){return o.Z.post("edit-profile",e)},editProfileImage:function(e){return o.Z.post("edit-profile-image",e)},forgetPassword:function(e){return o.Z.post("auth/forgot-password",e)},resetPassword:function(e){return o.Z.post("auth/reset-password",e)},googleLogin:function(e){return o.Z.post("auth/google",e)},getUserBooks:function(e){return console.log("page",e),o.Z.get("my-library?page=".concat(e))},checkLibraryForBook:function(e){return o.Z.get("check-library-for-book/".concat(e))},updateLibrary:function(e){return o.Z.post("update-library/".concat(e))}}},8682:function(e,t,n){"use strict";var o=n(6154),i=n(5991),r=n(3454),a=o.Z.create({baseURL:r.env.API_URL||"https://riwaya.rf.gd/api"});a.interceptors.request.use(function(e){var t=i.Z.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){Promise.reject(e)}),t.Z=a},4800:function(e,t,n){"use strict";n.r(t);var o=n(5893),i=n(8489);n(7294);var r=n(7521),a=n(5991),s=n(3502),c=n.n(s),l=n(6426),u=n(1163);t.default=function(){var e=(0,u.useRouter)(),t=function(t){r.Z.facebookLogin({accessToken:t.accessToken}).then(function(t){var n=t.data;a.Z.dispatch({type:"LOGIN",payload:n.success}),e.push("/")})},n=function(t){var n=JSON.parse(decodeURIComponent(escape(atob(t.credential.split(".")[1]))));r.Z.googleLogin(n).then(function(t){var n=t.data;a.Z.dispatch({type:"LOGIN",payload:n.success}),e.push("/")})};return(0,o.jsxs)("div",{className:"d-flex align-items-start justify-content-between flex-grow-1",children:[(0,o.jsxs)("a",{className:"position-absolute text-primary d-flex align-items-center gap-1",href:"/",style:{top:"2rem",left:"2rem"},children:[(0,o.jsx)("i",{className:"fas fa-arrow-left"}),(0,o.jsx)("span",{children:"الصفحة الرئيسية"})]}),(0,o.jsxs)(i.l0,{className:"guest-container shadow p-4 rounded-3",onSubmit:function(t){t.preventDefault();var n={email:t.target.email.value,password:t.target.password.value};r.Z.login(n).then(function(t){var n=t.data;a.Z.dispatch({type:"LOGIN",payload:n.success}),e.push("/")})},children:[(0,o.jsx)("h1",{className:"text-amiri text-center mb-3",children:"تسجيل الدخول"}),(0,o.jsxs)("div",{className:"mb-3 position-relative",children:[(0,o.jsx)("i",{className:"fa fa-envelope position-absolute end-0 border-start px-2 fs-4 text-secondary",style:{top:"40px"}}),(0,o.jsx)("label",{className:"form-label",children:"البريد الالكتروني"}),(0,o.jsx)("input",{type:"email",className:"form-control  pe-5",name:"email"})]}),(0,o.jsxs)("div",{className:"mb-3 position-relative",children:[(0,o.jsx)("i",{className:"fa fa-lock position-absolute end-0 border-start px-2 fs-4 text-secondary",style:{top:"40px"}}),(0,o.jsx)("label",{className:"form-label",children:" كلمة المرور"}),(0,o.jsx)("input",{type:"password",className:"form-control pe-5",name:"password"})]}),(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"تذكرني"}),(0,o.jsx)("input",{type:"checkbox",className:"form-check-input me-1"})]}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("a",{href:"/auth/forgot-password",className:"text-decoration-none text-gulzar",children:"نسيت كلمة المرور؟"})})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary text-white w-100",children:"تسجيل الدخول"}),(0,o.jsxs)("div",{className:"text-center mt-3",children:[(0,o.jsx)("span",{className:"text-secondary",children:"ليس لديك حساب؟"}),(0,o.jsx)("a",{href:"/auth/register",className:"text-decoration-none text-gulzar",children:"انشاء حساب"})]}),(0,o.jsxs)("div",{className:"text-center mt-3",children:[(0,o.jsx)("span",{className:"text-secondary",children:"تسجيل الدخول بواسطة"}),(0,o.jsxs)(i.X2,{className:"justify-content-center mt-1",children:[(0,o.jsx)("div",{className:"col-2",children:(0,o.jsx)(c(),{appId:"1304757180291828",style:{backgroundColor:"#3b5998",border:"none",color:"white",padding:"10px 15px",textAlign:"center",borderRadius:"5px",cursor:"pointer"},children:(0,o.jsx)("i",{className:"fab fa-facebook-f"}),onSuccess:function(e){return t(e)}})}),(0,o.jsx)("div",{className:"col-2",children:(0,o.jsx)(l.kZ,{onSuccess:n,onFailure:n,containerProps:{dir:"rtl",lang:"ar"},useOneTap:!0})})]})]})]}),(0,o.jsx)("div",{className:"w-50 h-100 d-none d-md-block",style:{backgroundImage:'url("/images/login-img.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})]})}}},function(e){e.O(0,[18,774,888,179],function(){return e(e.s=2505)}),_N_E=e.O()}]);