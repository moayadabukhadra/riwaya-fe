(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{837:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-library",function(){return n(8879)}])},7521:function(e,t,n){"use strict";var s=n(8682);t.Z={login:function(e){return s.Z.post("login",e)},register:function(e){return s.Z.post("/register",e)},getRole:function(){return s.Z.post("user-role")},logout:function(){return s.Z.post("/logout")},facebookLogin:function(e){return s.Z.post("auth/facebook",e)},editProfile:function(e){return s.Z.post("edit-profile",e)},editProfileImage:function(e){return s.Z.post("edit-profile-image",e)},forgetPassword:function(e){return s.Z.post("auth/forgot-password",e)},resetPassword:function(e){return s.Z.post("auth/reset-password",e)},googleLogin:function(e){return s.Z.post("auth/google",e)},getUserBooks:function(e){return console.log("page",e),s.Z.get("my-library?page=".concat(e))},checkLibraryForBook:function(e){return s.Z.get("check-library-for-book/".concat(e))},updateLibrary:function(e){return s.Z.post("update-library/".concat(e))}}},8682:function(e,t,n){"use strict";var s=n(6154),a=n(5991),r=n(3454),i=s.Z.create({baseURL:r.env.API_URL||"https://riwaya.rf.gd/api"});i.interceptors.request.use(function(e){var t=a.Z.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){Promise.reject(e)}),t.Z=i},8879:function(e,t,n){"use strict";n.r(t);var s=n(8732),a=n(5893),r=n(8489),i=n(7294),c=n(7521),o=n(6455),l=n.n(o),u=n(98);t.default=function(){var e,t=(0,s._)((0,i.useState)(),2),n=t[0],o=t[1],d=(0,s._)((0,i.useState)(),2),f=d[0],g=d[1],m=(0,s._)((0,i.useState)(1),2),p=m[0],x=m[1],h=(0,s._)((0,i.useState)(!0),2),j=h[0],b=h[1];(0,i.useEffect)(function(){c.Z.getUserBooks(p).then(function(e){var t=e.data;console.log(t),o(t.success.data),g(t.success.links),b(!1)})},[p]);var N=function(e){l().fire({title:"هل أنت متأكد؟",text:"سيتم حذف الكتاب من مكتبتك الخاصة",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"حذف",cancelButtonText:"إلغاء"}).then(function(t){t.isConfirmed&&c.Z.updateLibrary(e).then(function(e){e.data,l().fire("تم الحذف!","تم حذف الكتاب من مكتبتك الخاصة","success"),x(1)})})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{loading:j}),(0,a.jsxs)(r.X2,{className:"content container-lg align-items-start justify-content-center",children:[(0,a.jsx)("img",{className:"col-md-5 d-none d-md-block",src:"/images/my-library.png",alt:""}),(0,a.jsxs)("div",{className:"col-12 col-md-6",children:[(0,a.jsx)("h1",{className:"text-gulzar",children:"مكتبتي"}),(0,a.jsx)("p",{className:"text-secondary",children:"هنا يمكنك الاطلاع على الكتب التي قمت بإضافتها إلى مكتبتك الخاصة"}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-1 bg-white shadow rounded-3 p-4",children:[n&&n.map(function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)("img",{className:"rounded-2",width:100,src:e.image?"https://riwaya.rf.gd/riwaya/storage/app/public/images/"+e.image.path:"/images/placeholders/placeholder.jpg",alt:""}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-1 p-3",children:[(0,a.jsx)("strong",{className:"fs-4",children:e.title}),(0,a.jsx)("span",{className:"text-muted",children:e.author.name})]})]}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-1 justify-content-center ms-3",children:[(0,a.jsxs)("a",{href:"https://riwaya.rf.gd/riwaya/storage/app/public/books/"+e.file,className:"btn btn-outline-info  d-flex align-items-center justify-content-center gap-1",children:[(0,a.jsx)("i",{className:"fas fa-book-open"}),"قراءة"]}),(0,a.jsxs)("a",{download:e.file,href:"https://riwaya.rf.gd/api/book/download/"+e.id,className:"btn btn-outline-success d-flex align-items-center justify-content-center gap-1",children:[(0,a.jsx)("i",{className:"fas fa-file-pdf"}),"تحميل"]}),(0,a.jsxs)("button",{onClick:function(){return N(e.id)},className:"btn btn-outline-danger d-flex align-items-center justify-content-center gap-1",children:[(0,a.jsx)("i",{className:"fas fa-trash"}),"حذف"]})]})]}),(0,a.jsx)("hr",{})]})}),(0,a.jsx)("nav",{className:"","aria-label":"...",children:(0,a.jsx)(r.tl,{className:"pagination justify-content-center my-2",listClassName:"justify-content-center gap-1  flex-wrap",children:f&&f.map(function(t){return(0,a.jsx)(r.nt,{className:(t.url?"":"disabled")+(t.active?"active":""),children:(0,a.jsx)(r.kN,{className:"rounded-2 d-flex align-items-center justify-content-center gap-1 flex-grow-1",onClick:function(){t.url&&t.url&&x(t.label)},children:t.label.includes("next")?(0,a.jsx)("i",{className:"fa fa-angle-left"}):t.label.includes("prev")?(0,a.jsx)("i",{className:"fa fa-angle-right"}):null!==(e=t.label)&&void 0!==e?e:t.label})},t.label)})})})]})]})]})]})}},98:function(e,t,n){"use strict";var s=n(8146),a=n(5893);n(7294),t.Z=function(e){return e.loading?(0,a.jsx)("div",{style:{position:"fixed",inset:"0",zIndex:"9999",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("div",{className:"book",children:(0,a.jsxs)("div",{className:"inner",children:[(0,a.jsx)("div",{className:"left"}),(0,a.jsx)("div",{className:"middle"}),(0,a.jsx)("div",{className:"right"}),(0,a.jsx)("ul",{children:(0,s._)(Array(18)).map(function(e,t){return(0,a.jsx)("li",{})})})]})})}):null}}},function(e){e.O(0,[18,746,774,888,179],function(){return e(e.s=837)}),_N_E=e.O()}]);